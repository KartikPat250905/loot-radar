#name: Deploy to Production
#
#on:
#  push:
#    branches: [ main ]
#  workflow_dispatch:
#
#jobs:
#  build-android-release:
#    name: Build Android Release
#    runs-on: ubuntu-latest
#    timeout-minutes: 45
#
#    steps:
#      - name: Checkout Repository
#        uses: actions/checkout@v4
#
#      - name: Set up JDK 17
#        uses: actions/setup-java@v4
#        with:
#          java-version: '17'
#          distribution: 'temurin'
#          cache: 'gradle'
#
#      - name: Grant Execute Permission for Gradlew
#        run: chmod +x gradlew
#
#      - name: Gradle Cache
#        uses: gradle/actions/setup-gradle@v3
#
#      - name: Build Android Release APK
#        run: ./gradlew :composeApp:assembleRelease --stacktrace
#
#      - name: Build Android App Bundle (AAB)
#        run: ./gradlew :composeApp:bundleRelease --stacktrace
#
#      - name: Upload Release APK
#        uses: actions/upload-artifact@v4
#        with:
#          name: android-release-apk
#          path: composeApp/build/outputs/apk/release/*.apk
#          retention-days: 30
#
#      - name: Upload App Bundle (AAB)
#        uses: actions/upload-artifact@v4
#        with:
#          name: android-release-aab
#          path: composeApp/build/outputs/bundle/release/*.aab
#          retention-days: 30
#
#      - name: Create GitHub Release (Android)
#        if: startsWith(github.ref, 'refs/tags/')
#        uses: softprops/action-gh-release@v1
#        with:
#          files: |
#            composeApp/build/outputs/apk/release/*.apk
#            composeApp/build/outputs/bundle/release/*.aab
#          draft: false
#          prerelease: false
#
#  build-ios-release:
#    name: Build iOS Release
#    runs-on: macos-latest
#    timeout-minutes: 45
#
#    steps:
#      - name: Checkout Repository
#        uses: actions/checkout@v4
#
#      - name: Set up JDK 17
#        uses: actions/setup-java@v4
#        with:
#          java-version: '17'
#          distribution: 'temurin'
#          cache: 'gradle'
#
#      - name: Grant Execute Permission for Gradlew
#        run: chmod +x gradlew
#
#      - name: Gradle Cache
#        uses: gradle/actions/setup-gradle@v3
#
#      - name: Build iOS Frameworks (Release)
#        run: |
#          ./gradlew :composeApp:linkReleaseFrameworkIosArm64 --stacktrace
#          ./gradlew :composeApp:linkReleaseFrameworkIosSimulatorArm64 --stacktrace
#          ./gradlew :composeApp:linkReleaseFrameworkIosX64 --stacktrace
#
#      - name: Create XCFramework
#        run: |
#          xcodebuild -create-xcframework \
#            -framework composeApp/build/bin/iosArm64/releaseFramework/ComposeApp.framework \
#            -framework composeApp/build/bin/iosSimulatorArm64/releaseFramework/ComposeApp.framework \
#            -framework composeApp/build/bin/iosX64/releaseFramework/ComposeApp.framework \
#            -output composeApp/build/ComposeApp.xcframework
#
#      - name: Show Xcode Version
#        run: xcodebuild -version
#
#      - name: Build iOS Archive
#        working-directory: iosApp
#        run: |
#            xcodebuild archive \
#            -project iosApp.xcodeproj \
#            -scheme iosApp \
#            -configuration Release \
#            -archivePath build/iosApp.xcarchive \
#            -sdk iphoneos \
#            CODE_SIGN_IDENTITY="" \
#            CODE_SIGNING_REQUIRED=NO \
#            CODE_SIGNING_ALLOWED=NO \
#            ONLY_ACTIVE_ARCH=NO
#
#      - name: Upload iOS Archive
#        uses: actions/upload-artifact@v4
#        with:
#          name: ios-release-archive
#          path: iosApp/build/iosApp.xcarchive
#          retention-days: 30
#
#      - name: Upload XCFramework
#        uses: actions/upload-artifact@v4
#        with:
#          name: ios-xcframework
#          path: composeApp/build/ComposeApp.xcframework
#          retention-days: 30
#
#  deploy-notification:
#    name: Send Deployment Notification
#    runs-on: ubuntu-latest
#    needs: [build-android-release, build-ios-release]
#    if: success()
#
#    steps:
#      - name: Deployment Success
#        run: |
#          echo "‚úÖ Production deployment successful!"
#          echo "üì± Android APK & AAB ready"
#          echo "üçé iOS Archive ready"
